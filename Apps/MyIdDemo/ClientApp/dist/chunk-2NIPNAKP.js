import{a as me}from"./chunk-3CINSE24.js";import{a as ie,b as re}from"./chunk-HYDR5JNX.js";import"./chunk-LJ2X4TIF.js";import{a as O}from"./chunk-Y7YTAPDB.js";import{a as W}from"./chunk-E6PBY26I.js";import{a as H,b as J}from"./chunk-J7V4XGIJ.js";import{a as G}from"./chunk-UQNNMBE6.js";import"./chunk-GRQJUET4.js";import"./chunk-VLIVY6BI.js";import"./chunk-J2DBJL2B.js";import{a as oe}from"./chunk-2TXRH4OM.js";import"./chunk-BABM5QN5.js";import"./chunk-ZDQYZ24Q.js";import"./chunk-WKO4SONN.js";import{a as L,b as f,ca as S,d as V,da as ae,e as U,f as k,g as R,h as B,i as j,k as z,m as $,n as q}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as te,d as l,e as ne}from"./chunk-CU2LV2W6.js";import"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Aa as h,Da as v,Eb as i,Hc as D,Jb as p,Ob as r,Pb as m,Qb as g,Sb as E,Ub as C,Vb as b,Y as T,ca as _,db as a,dc as X,ec as d,fc as N,la as w,ma as I,mc as ee,sb as P,tc as Y,xb as c,za as A}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var y=class{static lessThanValidator(s,e,n=!0,o){return u=>{let M=u.get(s),F=u.get(e);if(!M||!F)return null;let K=Number(M.value),Q=Number(F.value);return isNaN(K)||isNaN(Q)||K<Q||!n&&K==Q?null:{minMaxError:{message:o??`${s} must be less ${n?"":"or equal to"}  than ${e}`,code:"minMaxError",minControlName:s,maxControlName:e}}}}};function fe(t,s){t&1&&(r(0,"label",4),d(1,"Team Name"),m()),t&2&&i("for","name")}function ue(t,s){t&1&&(r(0,"label",4),d(1,"Description"),m()),t&2&&i("for","description")}function ge(t,s){t&1&&(r(0,"label",4),d(1,"Minimum Position"),m()),t&2&&i("for","minPosition")}function _e(t,s){t&1&&(r(0,"label",4),d(1,"Maximum Position"),m()),t&2&&i("for","maxPosition")}function Ce(t,s){t&1&&(r(0,"span",15),d(1),m()),t&2&&(a(),N(s.message))}function be(t,s){if(t&1&&c(0,Ce,2,1,"span",15),t&2){let e,n=b(2);p((e=n._form.getError("minMaxError"))?0:-1,e)}}function he(t,s){if(t&1&&(r(0,"div",9)(1,"div",2)(2,"div",3),c(3,ge,2,1,"label",4),g(4,"input",11)(5,"sb-first-error",6),m(),r(6,"div",3),c(7,_e,2,1,"label",4),g(8,"input",12)(9,"sb-first-error",6),m()(),r(10,"div",13),c(11,be,1,1),m(),r(12,"div",14)(13,"h4"),d(14,"Position Configuration"),m(),r(15,"p"),d(16," Set the minimum and maximum position levels for team members. Position 1 is typically the lowest level, and higher numbers represent senior positions. "),m()()()),t&2){let e=b();a(3),p(e.showLabels()?3:-1),a(),i("id","minPosition"),a(),i("control",e._form.controls.minPosition),a(2),p(e.showLabels()?7:-1),a(),i("id","maxPosition"),a(),i("control",e._form.controls.maxPosition),a(2),p(e._form.controls.minPosition.touched||e._form.controls.maxPosition.touched?11:-1)}}var se=(()=>{class t{fb=_($);showLabels=h(!0);color=h("primary");canChangeTeamPositionRange=h(!0);addTeam=A();_form=this.fb.nonNullable.group({name:["",[f.required,f.minLength(2)]],description:[""],minPosition:[1,[f.required,f.min(1)]],maxPosition:[1,[f.required,f.min(1)]],leaderId:["",[]],teamType:["customer"]},{validators:y.lessThanValidator("minPosition","maxPosition",!1)});extractFormValues(){return{name:this._form.controls.name.value,description:this._form.controls.description.value||void 0,minPosition:this._form.controls.minPosition.value,maxPosition:this._form.controls.maxPosition.value,leaderId:this._form.controls.leaderId.value||void 0,teamType:this._form.controls.teamType.value}}add(){if(!this._form.valid)return;let e=this.extractFormValues();this.addTeam.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=P({type:t,selectors:[["sb-add-team-form"]],inputs:{showLabels:[1,"showLabels"],color:[1,"color"],canChangeTeamPositionRange:[1,"canChangeTeamPositionRange"]},outputs:{addTeam:"addTeam"},decls:16,vars:11,consts:[[1,"team-form",3,"ngSubmit","formGroup","sbFormControlFirstError"],[1,"form-section"],[1,"form-row"],[1,"form-group"],[3,"for"],["type","text","formControlName","name","placeholder","Team Name","sbInputStyle","",3,"id"],[3,"control"],[1,"form-group","full-width"],["type","text","formControlName","description","placeholder","Team Description (Optional)","sbInputStyle","",3,"id"],[1,"form-section","team-position"],[1,"btn-submit",3,"click","disabled","color"],["type","number","formControlName","minPosition","placeholder","Minimum Position","min","1","sbInputStyle","",3,"id"],["type","number","formControlName","maxPosition","placeholder","Maximum Position","min","1","sbInputStyle","",3,"id"],[1,"form-row","error"],[1,"info-card"],[1,"error"]],template:function(n,o){n&1&&(r(0,"form",0),C("ngSubmit",function(){return o._form.valid&&o.add()}),r(1,"div",1)(2,"div",2)(3,"div",3),c(4,fe,2,1,"label",4),g(5,"input",5)(6,"sb-first-error",6),m()(),r(7,"div",2)(8,"div",7),c(9,ue,2,1,"label",4),g(10,"input",8)(11,"sb-first-error",6),m()()(),c(12,he,17,7,"div",9),r(13,"div",1)(14,"sb-button",10),C("click",function(){return o.add()}),d(15," Create Team "),m()()()),n&2&&(i("formGroup",o._form)("sbFormControlFirstError",o._form),a(4),p(o.showLabels()?4:-1),a(),i("id","name"),a(),i("control",o._form.controls.name),a(3),p(o.showLabels()?9:-1),a(),i("id","description"),a(),i("control",o._form.controls.description),a(),p(o.canChangeTeamPositionRange()?12:-1),a(2),i("disabled",o._form.invalid)("color",o.color()))},dependencies:[q,k,L,R,V,U,z,B,j,J,H,G,W],styles:[".team-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:800px;margin:0 auto;padding:1rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{border:1px solid var(--mat-outline-variant);border-radius:8px;padding:1.5rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--mat-primary);font-size:1.25rem;font-weight:500;border-bottom:1px solid var(--mat-outline-variant);padding-bottom:.5rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-on-surface);font-size:.875rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   sb-first-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem}.team-form[_ngcontent-%COMP%]   .form-row.error[_ngcontent-%COMP%]{color:var(--mat-sys-error);justify-content:center}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container);border:1px solid var(--mat-sys-outline-variant);border-radius:8px;padding:1rem;margin-top:1rem}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--mat-sys-primary);font-size:1rem;font-weight:500}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-on-surface-variant);font-size:.875rem;line-height:1.4}.team-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;padding:.5rem;background-color:var(--mat-sys-surface-container);border-radius:4px;font-size:.75rem}.team-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1rem}.team-form[_ngcontent-%COMP%]   sb-button[_ngcontent-%COMP%]{align-self:flex-start;margin-top:1rem}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;border:1px solid var(--mat-sys-outline-variant);border-radius:4px;background:var(--mat-surface-container-highest)}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-value[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-on-surface)}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:12px;font-size:1rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=customer][_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;border:1px solid #2196f3}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=maintenance][_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00;border:1px solid #ff9800}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=super][_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2;border:1px solid #9c27b0}@media (max-width: 768px){.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{padding:1rem}}"],changeDetection:0})}return t})();function Te(t,s){t&1&&(r(0,"label",5),d(1,"Team Name"),m()),t&2&&i("for","name")}function Pe(t,s){t&1&&(r(0,"label",5),d(1,"Description"),m()),t&2&&i("for","description")}function ye(t,s){t&1&&(r(0,"label",5),d(1,"Minimum Position"),m()),t&2&&i("for","minPosition")}function Me(t,s){t&1&&(r(0,"label",5),d(1,"Maximum Position"),m()),t&2&&i("for","maxPosition")}function ve(t,s){t&1&&(r(0,"span",18),d(1),m()),t&2&&(a(),N(s.message))}function Se(t,s){if(t&1&&c(0,ve,2,1,"span",18),t&2){let e,n=b();p((e=n._form.getError("minMaxError"))?0:-1,e)}}function Oe(t,s){t&1&&(r(0,"label",5),d(1,"Team Leader"),m()),t&2&&i("for","leaderId")}function xe(t,s){if(t&1&&g(0,"sb-select",15),t&2){let e=b();i("id","leaderId")("options",e._memberOptions())("readonly",!e.canChangeTeamLeader())("color",e.color())}}function Fe(t,s){t&1&&g(0,"input",16),t&2&&i("id","leaderId")("readonly",!0)}var le=(()=>{class t{fb=_($);showLabels=h(!0);color=h("primary");canChangeTeamPositionRange=h(!0);canChangeTeamLeader=h(!1);updateTeam=A();set team(e){this.setFormValues(e)}_memberOptions=v([]);_form=this.fb.nonNullable.group({id:["",[f.required]],name:["",[f.required,f.minLength(2)]],description:[""],minPosition:[1,[f.required,f.min(1)]],maxPosition:[1,[f.required,f.min(1)]],leaderId:["",[]],teamType:["customer"]},{validators:y.lessThanValidator("minPosition","maxPosition",!1)});setFormValues(e){console.log("Setting form values for team:",e),e?(this.updateMemberOptions(e.members||[]),this._form.patchValue({id:e.id,name:e.name,description:e.description||"",minPosition:e.minPosition,maxPosition:e.maxPosition,leaderId:e.leaderId||"",teamType:e.teamType||"customer"}),console.log("Form values set:",this._form.value)):(this._form.reset({id:"",name:"",description:"",minPosition:1,maxPosition:1,leaderId:"",teamType:"customer"}),this._memberOptions.set([]))}updateMemberOptions(e){let n=e.map(o=>({value:o.id,label:`${o.firstName} ${o.lastName} (${o.userName})`}));n.unshift({value:"",label:"-- Select Team Leader --"}),this._memberOptions.set(n)}extractFormValues(){return{id:this._form.controls.id.value,name:this._form.controls.name.value,description:this._form.controls.description.value||void 0,minPosition:this._form.controls.minPosition.value,maxPosition:this._form.controls.maxPosition.value,leaderId:this._form.controls.leaderId.value||void 0,teamType:this._form.controls.teamType.value}}update(){if(!this._form.valid)return;let e=this.extractFormValues();this.updateTeam.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=P({type:t,selectors:[["sb-update-team-form"]],inputs:{showLabels:[1,"showLabels"],color:[1,"color"],canChangeTeamPositionRange:[1,"canChangeTeamPositionRange"],canChangeTeamLeader:[1,"canChangeTeamLeader"],team:"team"},outputs:{updateTeam:"updateTeam"},decls:39,vars:23,consts:[[1,"team-form",3,"ngSubmit","formGroup","sbFormControlFirstError"],[1,"form-section"],[1,"form-row"],["hidden","","type","text","formControlName","id","placeholder","Team ID","sbInputStyle","",3,"id"],[1,"form-group"],[3,"for"],["type","text","formControlName","name","placeholder","Team Name","sbInputStyle","",3,"id"],[3,"control"],[1,"form-group","full-width"],["type","text","formControlName","description","placeholder","Team Description (Optional)","sbInputStyle","",3,"id"],[1,"form-section","team-position"],["type","number","formControlName","minPosition","placeholder","Minimum Position","min","1","sbInputStyle","",3,"id","readonly"],["type","number","formControlName","maxPosition","placeholder","Maximum Position","min","1","sbInputStyle","",3,"id","readonly"],[1,"form-row","error"],[1,"info-card"],["placeholder","Select Team Leader","formControlName","leaderId",3,"id","options","readonly","color"],["formControlName","leaderId","placeholder","Team Leader ID","sbInputStyle","",3,"id","readonly"],[1,"btn-submit",3,"click","disabled","color"],[1,"error"]],template:function(n,o){n&1&&(r(0,"form",0),C("ngSubmit",function(){return o._form.valid&&o.update()}),r(1,"div",1)(2,"div",2),g(3,"input",3),r(4,"div",4),c(5,Te,2,1,"label",5),g(6,"input",6)(7,"sb-first-error",7),m()(),r(8,"div",2)(9,"div",8),c(10,Pe,2,1,"label",5),g(11,"input",9)(12,"sb-first-error",7),m()()(),r(13,"div",10)(14,"div",2)(15,"div",4),c(16,ye,2,1,"label",5),g(17,"input",11)(18,"sb-first-error",7),m(),r(19,"div",4),c(20,Me,2,1,"label",5),g(21,"input",12)(22,"sb-first-error",7),m()(),r(23,"div",13),c(24,Se,1,1),m(),r(25,"div",14)(26,"h4"),d(27,"Position Configuration"),m(),r(28,"p"),d(29," Set the minimum and maximum position levels for team members. Position 1 is typically the lowest level, and higher numbers represent senior positions. "),m()()(),r(30,"div",1)(31,"div",4),c(32,Oe,2,1,"label",5)(33,xe,1,4,"sb-select",15)(34,Fe,1,2,"input",16),g(35,"sb-first-error",7),m()(),r(36,"div",1)(37,"sb-button",17),C("click",function(){return o.update()}),d(38," Save Changes "),m()()()),n&2&&(i("formGroup",o._form)("sbFormControlFirstError",o._form),a(3),i("id","id"),a(2),p(o.showLabels()?5:-1),a(),i("id","name"),a(),i("control",o._form.controls.name),a(3),p(o.showLabels()?10:-1),a(),i("id","description"),a(),i("control",o._form.controls.description),a(4),p(o.showLabels()?16:-1),a(),i("id","minPosition")("readonly",!o.canChangeTeamPositionRange()),a(),i("control",o._form.controls.minPosition),a(2),p(o.showLabels()?20:-1),a(),i("id","maxPosition")("readonly",!o.canChangeTeamPositionRange()),a(),i("control",o._form.controls.maxPosition),a(2),p(o._form.controls.minPosition.touched||o._form.controls.maxPosition.touched?24:-1),a(8),p(o.showLabels()?32:-1),a(),p(o._memberOptions().length?33:34),a(2),i("control",o._form.controls.leaderId),a(2),i("disabled",o._form.invalid)("color",o.color()))},dependencies:[q,k,L,R,V,U,z,B,j,J,H,G,W,me],styles:[".team-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:800px;margin:0 auto;padding:1rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{border:1px solid var(--mat-outline-variant);border-radius:8px;padding:1.5rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--mat-primary);font-size:1.25rem;font-weight:500;border-bottom:1px solid var(--mat-outline-variant);padding-bottom:.5rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-on-surface);font-size:.875rem}.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   sb-first-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem}.team-form[_ngcontent-%COMP%]   .form-row.error[_ngcontent-%COMP%]{color:var(--mat-sys-error);justify-content:center}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container);border:1px solid var(--mat-sys-outline-variant);border-radius:8px;padding:1rem;margin-top:1rem}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--mat-sys-primary);font-size:1rem;font-weight:500}.team-form[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-on-surface-variant);font-size:.875rem;line-height:1.4}.team-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;padding:.5rem;background-color:var(--mat-sys-surface-container);border-radius:4px;font-size:.75rem}.team-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1rem}.team-form[_ngcontent-%COMP%]   sb-button[_ngcontent-%COMP%]{align-self:flex-start;margin-top:1rem}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;border:1px solid var(--mat-sys-outline-variant);border-radius:4px;background:var(--mat-surface-container-highest)}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-value[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-on-surface)}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:12px;font-size:1rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=customer][_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;border:1px solid #2196f3}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=maintenance][_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00;border:1px solid #ff9800}.team-form[_ngcontent-%COMP%]   .team-type-display[_ngcontent-%COMP%]   .team-type-badge[data-type=super][_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2;border:1px solid #9c27b0}@media (max-width: 768px){.team-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.team-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{padding:1rem}}"],changeDetection:0})}return t})();var we=[O.create("name"),O.create("teamType"),O.create("minPosition"),O.create("maxPosition")],de=(()=>{class t{tableColumns=D(()=>we);static \u0275fac=function(n){return new(n||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ce=(()=>{class t extends ne{constructor(){super(_(te).baseUrl,l.Teams.Controller)}addCustomerToTeam=(e,n)=>this._postAction(l.Teams.action("addCustomerToTeam"),e,n??{});add=(e,n)=>this._postAction(l.Teams.action("add"),e,n??{});edit=(e,n)=>this._patchAction(l.Teams.action("edit"),e,n??{});updatePositionRange=(e,n)=>this._patchAction(l.Teams.action("updatePositionRange"),e,n??{});deleteById=(e,n)=>this._deleteAction(l.Teams.action("delete"),[e],n??{});getAll=e=>this._getAction(l.Teams.action("getAll"),e??{});getSuper=e=>this._getAction(l.Teams.action("getSuper"),e??{});getMntc=e=>this._getAction(l.Teams.action("getMntc"),e??{});getById=(e,n)=>this._getActionById(l.Teams.action("get"),[e],n??{});getAllByName=(e,n)=>this._getActionById(l.Teams.action("getAllByName"),[e],n??{});page=(e,n)=>this._postAction(l.Teams.action("page"),e,n??{});addSubscription=(e,n)=>this._postAction(l.Teams.action("addSubscription"),e,n??{});getSubscriptionBySubId=(e,n)=>this._getActionById(l.Teams.action("getSubscription"),[e],n??{});removeSubscription=(e,n)=>this._postAction(l.Teams.action("removeSubscription"),e,n??{});recordSubscriptionPayment=(e,n)=>this._postAction(l.Teams.action("recordSubscriptionPayment"),e,n??{});getDeviceBySubIdAndDvcId=(e,n,o)=>this._getActionById(l.Teams.action("getDevice"),[e,n],o??{});addDevice=(e,n)=>this._postAction(l.Teams.action("addDevice"),e,n??{});removeDevice=(e,n)=>this._postAction(l.Teams.action("removeDevice"),e,n??{});updateDevice=(e,n)=>this._patchAction(l.Teams.action("updateDevice"),e,n??{});static \u0275fac=function(n){return new(n||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z=(()=>{class t{_ioService=_(ce);_auth=_(oe);_crudSignalOps=new ie;_teamsState=S.Create(()=>this._ioService.getAll()).setOnSuccessFn((e,n)=>this._crudSignalOps.refresh(n)).trigger();_addState=S.CreateWithInput(e=>this._ioService.add(e)).setSuccessMsgFn(e=>`Team, ${e.name} added!`).setOnSuccessFn((e,n)=>this._crudSignalOps.append(n));_updateState=S.CreateWithInput(e=>this._ioService.edit(e)).setSuccessMsgFn((e,n)=>`Team, ${n?.name} updated successfully!`).setOnSuccessFn((e,n)=>this._crudSignalOps.insert(n));_deleteState=S.CreateWithInput(e=>this._ioService.deleteById(e.id)).setSuccessMsgFn(e=>`Team, ${e.name} deleted successfully \u{1F5D1}\uFE0F`).setOnSuccessFn(e=>this._crudSignalOps.delete(e));_states=ae.Combine(this._addState,this._deleteState,this._updateState,this._teamsState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;data=this._crudSignalOps.data;canUpdateTeam=D(()=>this._auth.isMntcMinimum());canUpdateTeamFn=e=>{switch(e.teamType){case"customer":return this._auth.isMntcPositionMinimum(2)();case"maintenance":return this._auth.isSuperPositionMinimum(2)();default:return this._auth.isSuperLdr()}};canUpdateTeamPositionRangeFn=e=>{switch(e.teamType){case"customer":return this._auth.isMntcPositionMinimum(2)();case"maintenance":return this._auth.isMntcLdr();default:return this._auth.isSuperLdr()}};canUpdateTeamLeaderFn=e=>this._auth.teamType()===e.teamType&&this._auth.isLdr();updateTeam=e=>this._updateState.trigger(e);addTeam=e=>this._addState.trigger(e);deleteTeam=e=>this._deleteState.trigger(e);static \u0275fac=function(n){return new(n||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function Ie(t,s){if(t&1){let e=E();r(0,"sb-add-team-form",3),C("addTeam",function(o){w(e);let u=b();return I(u.addTeam(o))}),m()}}function Ae(t,s){if(t&1){let e=E();r(0,"sb-update-team-form",4),C("updateTeam",function(o){w(e);let u=b();return I(u.updateTeam(o))}),m()}if(t&2){let e=s.$implicit,n=b();i("team",e)("canChangeTeamPositionRange",n._canUpdateTeamPositionRangefn(e))("canChangeTeamLeader",n._canUpdateTeamLeaderfn(e))}}var vt=(()=>{class t{_state=_(Z);_columnService=_(de);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_data=this._state.data;_canUpdateTeam=this._state.canUpdateTeam;_canUpdateTeamFn=this._state.canUpdateTeamFn;_canUpdateTeamPositionRangefn=this._state.canUpdateTeamPositionRangeFn;_canUpdateTeamLeaderfn=this._state.canUpdateTeamLeaderFn;_showAddForm=v(!1);_selectedTeam=v(null);_tableColumns=this._columnService.tableColumns;_deleteMessageFn=e=>`Are you sure you want to delete team, ${e.name}? 
This action cannot be undone.`;addTeam=e=>this._state.addTeam(e);updateTeam=e=>this._state.updateTeam(e);deleteTeam=e=>this._state.deleteTeam(e);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=P({type:t,selectors:[["sb-teams-table"]],features:[ee([Z])],decls:5,vars:11,consts:[["addMntcTeamForm",""],["updateTeamForm",""],[1,"table",3,"deleteItem","addFormTemplate","updateFormTemplate","tableColumns","data","loading","errorMsg","successMsg","addItemTooltip","deleteModalMessageFn","rowClickable","rowClickableFn"],[3,"addTeam"],[3,"updateTeam","team","canChangeTeamPositionRange","canChangeTeamLeader"]],template:function(n,o){if(n&1){let u=E();r(0,"sb-crud-table",2),C("deleteItem",function(F){return w(u),I(o.deleteTeam(F))}),m(),c(1,Ie,1,0,"ng-template",null,0,Y)(3,Ae,1,3,"ng-template",null,1,Y)}if(n&2){let u=X(2),M=X(4);i("addFormTemplate",u)("updateFormTemplate",M)("tableColumns",o._tableColumns())("data",o._data())("loading",o._loading())("errorMsg",o._errorMsg())("successMsg",o._successMsg())("addItemTooltip","Add Mntc Team")("deleteModalMessageFn",o._deleteMessageFn)("rowClickable",o._canUpdateTeam())("rowClickableFn",o._canUpdateTeamFn)}},dependencies:[le,se,re],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.table[_ngcontent-%COMP%]{width:98%;max-width:1200px;margin:0 auto}"],changeDetection:0})}return t})();export{vt as TeamsTableComponent};
