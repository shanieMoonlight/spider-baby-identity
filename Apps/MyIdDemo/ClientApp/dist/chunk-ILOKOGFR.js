import{a as D}from"./chunk-6BKESGHS.js";import{a as U}from"./chunk-7E3DRIOT.js";import{b as x}from"./chunk-Y3V5RPEH.js";import"./chunk-RPLYZMPJ.js";import"./chunk-3CINSE24.js";import{a as V}from"./chunk-6BWBEIMS.js";import{a as I,b as j}from"./chunk-HYDR5JNX.js";import"./chunk-LJ2X4TIF.js";import{a}from"./chunk-Y7YTAPDB.js";import{a as w}from"./chunk-A4LVP73L.js";import"./chunk-E6PBY26I.js";import"./chunk-J7V4XGIJ.js";import"./chunk-UQNNMBE6.js";import"./chunk-GRQJUET4.js";import"./chunk-VLIVY6BI.js";import"./chunk-J2DBJL2B.js";import{a as g}from"./chunk-2TXRH4OM.js";import"./chunk-BABM5QN5.js";import"./chunk-ZDQYZ24Q.js";import"./chunk-WKO4SONN.js";import{ca as m,da as A}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import"./chunk-CU2LV2W6.js";import"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Da as P,Eb as p,Hc as O,Ob as _,Pb as u,Sb as M,Ub as b,Vb as s,Y as c,ca as o,dc as h,la as d,ma as l,mc as v,sb as F,tc as S,xb as y}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var B=(()=>{class t{static delete="delete"}return t})(),E=[a.create("userName"),a.create("email"),a.create("firstName"),a.create("lastName")],W=[a.create(B.delete).setActionComponent(V,{color:"error"})],k=(()=>{class t{_auth=o(g);tableColumns=O(()=>this._auth.isMntc()?[...E,...W]:E);static \u0275fac=function(i){return new(i||t)};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var C=(()=>{class t{_ioService=o(w);_auth=o(g);_crudSignalOps=new I;_mntcTeamState=m.Create(()=>this._ioService.getMntcTeamMembers()).setOnSuccessFn((e,i)=>this._crudSignalOps.refresh(i)).trigger();_addState=m.CreateWithInput(e=>this._ioService.addMntcTeamMember(e)).setSuccessMsgFn(e=>`Member, ${e.email} added!`).setOnSuccessFn((e,i)=>this._crudSignalOps.append(i));_updatePositionState=m.CreateWithInput(e=>this._ioService.updatePosition(e)).setSuccessMsgFn((e,i)=>`Member, ${i?.email} updated successfully!`).setOnSuccessFn((e,i)=>this._crudSignalOps.insert(i));_deleteMemberState=m.CreateWithInput(e=>this._ioService.deleteMntcMemberByUserId(e.id)).setSuccessMsgFn(e=>`Member, ${e.email} deleted successfully \u{1F5D1}\uFE0F`).setOnSuccessFn(e=>this._crudSignalOps.delete(e));_states=A.Combine(this._addState,this._deleteMemberState,this._updatePositionState,this._mntcTeamState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;data=this._crudSignalOps.data;canUpdateMember=this._auth.isMntc;updatePosition=e=>this._updatePositionState.trigger(e);addMember=e=>this._addState.trigger(e);deleteMember=e=>this._deleteMemberState.trigger(e);static \u0275fac=function(i){return new(i||t)};static \u0275prov=c({token:t,factory:t.\u0275fac})}return t})();function R(t,f){if(t&1){let e=M();_(0,"sb-add-mntc-member-form",3),b("addMember",function(n){d(e);let r=s();return l(r.addMntcMember(n))}),u()}if(t&2){let e=s();p("teamPositionOptions",e._teamPositionOptions)}}function q(t,f){if(t&1){let e=M();_(0,"sb-update-team-position-form",4),b("updatePosition",function(n){d(e);let r=s();return l(r.updatePosition(n))}),u()}if(t&2){let e=f.$implicit,i=s();p("member",e)("teamPositionOptions",i._teamPositionOptions)}}var _e=(()=>{class t{_state=o(C);_columnService=o(k);_teamPositionProvider=o(x);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_data=this._state.data;_tableColumns=this._columnService.tableColumns;_showAddForm=P(!1);_teamPositionOptions=this._teamPositionProvider.getOptions();_deleteMessageFn=e=>`Are you sure you want to delete ${e.userName||e.email}? 
This action cannot be undone.`;_canUpdateMember=this._state.canUpdateMember;addMntcMember=e=>this._state.addMember(e);updatePosition=e=>this._state.updatePosition(e);deleteMember=e=>this._state.deleteMember(e);static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["sb-mntc-team"]],features:[v([C])],decls:5,vars:10,consts:[["addMntcMemberForm",""],["updateMemberForm",""],[1,"table",3,"deleteItem","addFormTemplate","updateFormTemplate","tableColumns","data","loading","errorMsg","successMsg","addItemTooltip","deleteModalMessageFn","rowClickable"],[3,"addMember","teamPositionOptions"],[3,"updatePosition","member","teamPositionOptions"]],template:function(i,n){if(i&1){let r=M();_(0,"sb-crud-table",2),b("deleteItem",function(N){return d(r),l(n.deleteMember(N))}),u(),y(1,R,1,1,"ng-template",null,0,S)(3,q,1,2,"ng-template",null,1,S)}if(i&2){let r=h(2),T=h(4);p("addFormTemplate",r)("updateFormTemplate",T)("tableColumns",n._tableColumns())("data",n._data())("loading",n._loading())("errorMsg",n._errorMsg())("successMsg",n._successMsg())("addItemTooltip","Add Mntc Member")("deleteModalMessageFn",n._deleteMessageFn)("rowClickable",n._canUpdateMember())}},dependencies:[D,U,j],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.table[_ngcontent-%COMP%]{width:98%;max-width:1200px;margin:0 auto}"],changeDetection:0})}return t})();export{_e as MntcTeamComponent};
