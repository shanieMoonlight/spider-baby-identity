import{a as b}from"./chunk-HZ2EKXOK.js";import{a as P}from"./chunk-YIT3BSWB.js";import{a as S}from"./chunk-UQNNMBE6.js";import{a as C}from"./chunk-5M6LSHM4.js";import{a as k}from"./chunk-QHIVMJYN.js";import{a as $}from"./chunk-WKO4SONN.js";import{ca as M,da as O}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as x}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import{c as h}from"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{A as l,Eb as f,Gb as c,Hc as r,Ob as m,Pb as u,Qb as g,Ub as _,Y as E,ca as o,db as a,ec as p,f as y,mc as w,p as s,q as d,sb as I}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var v=(()=>{class i{_ioService=o(x);_actRoute=o(k);_userId$=this._actRoute.queryParamMap.pipe(s(e=>e.get(C.Params.USER_ID_KEY)),l(e=>!!e));_userId=h(this._userId$);_token$=this._actRoute.queryParamMap.pipe(s(e=>e.get(C.Params.CONFIRMATION_TOKEN_KEY)),l(e=>!!e));_token=h(this._token$);readyToConfirm=r(()=>!!this._userId()&&!!this._token());invalidDataErrorMsg=r(()=>this.readyToConfirm()?void 0:"Invalid userId or token.");_confirmDto$=d([this._userId$,this._token$]).pipe(s(([e,t])=>({userId:e,confirmationToken:t})));_confirmEmailState=M.CreateWithObservableInput(this._confirmDto$,e=>this._ioService.confirmEmail(e)).setSuccessMsgFn((e,t)=>`${t.message||"Email confirmed!."}`);_resendClick$=new y;_resendDto$=d([this._userId$,this._resendClick$]).pipe(s(([e])=>({userId:e})));_resendState=M.CreateWithObservableInput(this._resendDto$,e=>this._ioService.resendEmailConfirmation(e)).setSuccessMsgFn((e,t)=>`${t.message||"Resend confirmation email request is successful."}`);_states=O.Combine(this._resendState,this._confirmEmailState);errorMsg=r(()=>this.invalidDataErrorMsg()||this._states.errorMsg());loading=this._states.loading;resendSuccess=r(()=>!!this._resendState.successMsg()?.length);confirmationSuccess=r(()=>!!this._confirmEmailState.successMsg()?.length);resendSuccessMsg=this._resendState.successMsg;emailConfirmedSuccessMsg=this._confirmEmailState.successMsg;resendConfirmation=()=>this._resendClick$.next();static \u0275fac=function(t){return new(t||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})}return i})();var X=(()=>{class i{_state=o(v);_router=o(P);_errorMsg=this._state.errorMsg;_loading=this._state.loading;_resendSuccess=this._state.resendSuccess;_confirmationSuccess=this._state.confirmationSuccess;_emailConfirmedSuccessMsg=this._state.emailConfirmedSuccessMsg;_resendSuccessMsg=this._state.resendSuccessMsg;resendConfirmation=()=>this._state.resendConfirmation();goToLogin=()=>this._router.navigateToLogin();static \u0275fac=function(t){return new(t||i)};static \u0275cmp=I({type:i,selectors:[["sb-confirm-email"]],features:[w([v,b,S])],decls:7,vars:11,consts:[[1,"container"],[3,"title","message"],["color","primary",1,"go-to-login-btn",3,"click"],["color","error",1,"resend-confirmation-btn",3,"click"],[3,"errorMsg","successMsg","isLoading"]],template:function(t,n){t&1&&(m(0,"div",0),g(1,"sb-confirmed-card",1),m(2,"sb-button",2),_("click",function(){return n.goToLogin()}),p(3," Login "),u(),m(4,"sb-button",3),_("click",function(){return n.resendConfirmation()}),p(5," Resend Email Confirmation "),u()(),g(6,"sb-notifications-modal-mat",4)),t&2&&(a(),c("show",n._confirmationSuccess()),f("title","Email Confirmed!")("message",n._emailConfirmedSuccessMsg()),a(),c("show",n._resendSuccess()),a(2),c("show",n._errorMsg()),a(2),f("errorMsg",n._errorMsg())("successMsg",n._resendSuccessMsg())("isLoading",n._loading()))},dependencies:[$,b,S],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;height:100%;max-width:1200px;display:flex;align-items:center;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;margin-bottom:3rem;line-height:1.4}sb-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translateY(40px) scale(.98);margin:2rem 0;width:300px}sb-confirmed-card[_ngcontent-%COMP%]{border-radius:1.25rem;box-shadow:0 4px 24px #3c48581f;max-width:400px;max-height:0px;margin:0 auto;transform:translateY(40px) scale(.98);opacity:0;overflow:hidden;pointer-events:none;transition:opacity .5s cubic-bezier(.4,0,.2,1),transform .5s cubic-bezier(.4,0,.2,1)}sb-confirmed-card.show[_ngcontent-%COMP%], sb-button.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:auto;max-height:unset;margin:2rem auto 1.5rem;overflow:auto}"],changeDetection:0})}return i})();export{X as ConfirmEmailComponent};
