import{a as b}from"./chunk-6BWBEIMS.js";import{a as h,b as v}from"./chunk-HYDR5JNX.js";import"./chunk-LJ2X4TIF.js";import{a as n}from"./chunk-Y7YTAPDB.js";import{a as f}from"./chunk-A4LVP73L.js";import"./chunk-GRQJUET4.js";import"./chunk-VLIVY6BI.js";import"./chunk-J2DBJL2B.js";import{a as M}from"./chunk-2TXRH4OM.js";import"./chunk-BABM5QN5.js";import"./chunk-ZDQYZ24Q.js";import"./chunk-WKO4SONN.js";import{ca as i,da as S}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as C}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Eb as l,Hc as _,Ob as u,Pb as d,Ub as p,Y as a,ca as r,mc as g,sb as m}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var c=(()=>{class e{_userMgmtIoService=r(f);_accountIoService=r(C);_crudSignalOps=new h;_customersState=i.Create(()=>this._userMgmtIoService.getCustomers()).setOnSuccessFn((t,s)=>this._crudSignalOps.refresh(s)).trigger();_deleteCustomerState=i.CreateWithInput(t=>this._accountIoService.closeAccountByTeamId(t.teamId)).setSuccessMsgFn(t=>`Member, ${t.email} deleted successfully \u{1F5D1}\uFE0F`).setOnSuccessFn(t=>this._crudSignalOps.delete(t));_states=S.Combine(this._deleteCustomerState,this._customersState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;data=this._crudSignalOps.data;deleteCustomer=t=>this._deleteCustomerState.trigger(t);static \u0275fac=function(s){return new(s||e)};static \u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var T=(()=>{class e{static delete="delete"}return e})(),y=[n.create("userName"),n.create("email"),n.create("firstName"),n.create("lastName")],w=[n.create(T.delete).setActionComponent(b,{color:"error"})],F=(()=>{class e{_auth=r(M);tableColumns=_(()=>this._auth.isMntcMinimum()?[...y,...w]:y);static \u0275fac=function(s){return new(s||e)};static \u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var V=(()=>{class e{_state=r(c);_columnService=r(F);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_data=this._state.data;_tableColumns=this._columnService.tableColumns;_deleteMessageFn=t=>`Are you sure you want to delete ${t.userName||t.email}? 
This action cannot be undone.`;deleteCustomer=t=>this._state.deleteCustomer(t);static \u0275fac=function(s){return new(s||e)};static \u0275cmp=m({type:e,selectors:[["sb-customers"]],features:[g([c])],decls:1,vars:6,consts:[[1,"table",3,"deleteItem","tableColumns","data","loading","errorMsg","successMsg","deleteModalMessageFn"]],template:function(s,o){s&1&&(u(0,"sb-crud-table",0),p("deleteItem",function(O){return o.deleteCustomer(O)}),d()),s&2&&l("tableColumns",o._tableColumns())("data",o._data())("loading",o._loading())("errorMsg",o._errorMsg())("successMsg",o._successMsg())("deleteModalMessageFn",o._deleteMessageFn)},dependencies:[v],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.table[_ngcontent-%COMP%]{width:98%;max-width:1200px;margin:0 auto}"],changeDetection:0})}return e})();export{V as CustomersComponent};
