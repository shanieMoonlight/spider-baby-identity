import{b as h}from"./chunk-CGP4DSMR.js";import{a as E}from"./chunk-NHDKTSK5.js";import{a as O}from"./chunk-D3W4P42R.js";import"./chunk-DNILCXFE.js";import"./chunk-LAXJKARQ.js";import{b as j,c as A}from"./chunk-CD5ONLAB.js";import"./chunk-E6PBY26I.js";import"./chunk-XVK472TK.js";import"./chunk-J7V4XGIJ.js";import{a as k}from"./chunk-YIT3BSWB.js";import"./chunk-UQNNMBE6.js";import"./chunk-5M6LSHM4.js";import"./chunk-QHIVMJYN.js";import"./chunk-GRQJUET4.js";import"./chunk-VLIVY6BI.js";import"./chunk-J2DBJL2B.js";import"./chunk-2TXRH4OM.js";import"./chunk-BABM5QN5.js";import"./chunk-ZDQYZ24Q.js";import{a as x}from"./chunk-WKO4SONN.js";import"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import{a as D}from"./chunk-ZUYYKIIZ.js";import{a as R}from"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Da as M,Eb as d,Ic as u,Jb as P,Ob as p,Pb as c,Qb as f,Sb as L,Ub as w,Vb as S,ca as r,db as g,dc as v,ic as F,jc as b,kc as T,la as s,ma as a,mc as J,sb as y,ta as C,tc as V,xb as _}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";function W(t,U){t&1&&f(0,"asl-google-signin-button",5)}function B(t,U){if(t&1&&_(0,W,1,0,"asl-google-signin-button",5),t&2){let e=S();P(e._showSocialLinks()?0:-1)}}var ee=(()=>{class t{_state=r(h);_socialAuth=r(j);_router=r(k);_destroyRef=r(C);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_showSocialLinks=this._state.showSocialLinks;_showForgotPwd=M(!1);constructor(){u(()=>{if(this._state.loginSuccess()){R.log("LoginJwtComponent: loginSuccess effect triggered",this._state.redirectUrl());let e=this._state.redirectUrl();e?this._router.navigate([e]):this._router.navigateToHome()}}),u(()=>{let e=this._state.twoFactorData();e&&this._router.navigateToVerify(e.token,e.provider)})}ngOnInit(){this._socialAuth.authState.pipe(D(this._destroyRef)).subscribe(e=>{e&&(this._state.loginGoogle(e),this._socialAuth.signOut())})}login=e=>(console.log("LoginJwtComponent.login",e),this._state.login(e));onForgotPwd=()=>this._showForgotPwd.set(!0);onForgotPasswordResult=e=>this._state.forgotPassword(e);static \u0275fac=function(l){return new(l||t)};static \u0275cmp=y({type:t,selectors:[["sb-login-jwt"]],features:[J([h])],decls:6,vars:6,consts:[["socialTemplate",""],[1,"container"],[3,"login","forgotPwd","socialTemplate"],[3,"openModalChange","forgotPwd","openModal"],[3,"errorMsg","toastMsg","isLoading","loadingMessage"],["type","icon","size","large"]],template:function(l,o){if(l&1){let n=L();p(0,"div",1)(1,"sb-login-form",2),w("login",function(i){return s(n),a(o.login(i))})("forgotPwd",function(){return s(n),a(o.onForgotPwd())}),c(),p(2,"sb-forgot-pwd-modal",3),T("openModalChange",function(i){return s(n),b(o._showForgotPwd,i)||(o._showForgotPwd=i),a(i)}),w("forgotPwd",function(i){return s(n),a(o.onForgotPasswordResult(i))}),c(),f(3,"sb-notifications-modal-mat",4),_(4,B,1,1,"ng-template",null,0,V),c()}if(l&2){let n=v(5);g(),d("socialTemplate",n),g(),F("openModal",o._showForgotPwd),g(),d("errorMsg",o._errorMsg())("toastMsg",o._successMsg())("isLoading",o._loading())("loadingMessage","Loading ...")}},dependencies:[A,E,x,O],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;max-width:1200px;display:flex;align-items:center;flex-direction:column;justify-content:center}"],changeDetection:0})}return t})();export{ee as LoginJwtComponent};
