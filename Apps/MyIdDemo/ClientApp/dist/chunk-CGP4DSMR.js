import{a as d}from"./chunk-LAXJKARQ.js";import{a as m}from"./chunk-5M6LSHM4.js";import{a as h}from"./chunk-QHIVMJYN.js";import{ca as n,da as l}from"./chunk-VJXHLJA5.js";import{a as f}from"./chunk-CWY6TGXW.js";import{b as g}from"./chunk-CU2LV2W6.js";import{c}from"./chunk-ZUYYKIIZ.js";import{A as u,Hc as r,Y as S,ca as s,p as i}from"./chunk-CCUFKVTZ.js";var a=class{token;provider;constructor(_,t){this.token=_,this.provider=t}};var $=(()=>{class o{showSocialLinks;constructor(t){this.showSocialLinks=t}static create=t=>new o(t?.showSocialLinks??!1)}return o})(),b=(()=>{class o{_ioService=s(f);_loginService=s(d);_actRoute=s(h);_showSocialLinks$=this._actRoute.data.pipe(i(t=>t),i(t=>t.showSocialLinks??!1));showSocialLinks=c(this._showSocialLinks$,{initialValue:!1});_redirectUrl$=this._actRoute.queryParamMap.pipe(i(t=>t.get(m.Params.REDIRECT_URL_KEY)),u(t=>!!t));redirectUrl=c(this._redirectUrl$,{initialValue:null});_loginState=n.CreateWithInput(t=>this._loginService.loginJwt(t)).setSuccessMsgFn(t=>`User,  ${t.email??t.username??t.userId}, is logged in successfully!`).setOnSuccessFn((t,e)=>{console.log("Login successful:",e)});_googleLoginState=n.CreateWithInput(t=>this._loginService.loginGoogleJwt(t)).setSuccessMsgFn(t=>"Logged in successfully!").setOnSuccessFn((t,e)=>{console.log("Login successful:",t,e)});_forgotPwdState=n.CreateWithInput(t=>this._ioService.forgotPassword(t)).setSuccessMsgFn((t,e)=>`${e.message}`);_states=l.Combine(this._loginState,this._forgotPwdState,this._googleLoginState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;loginSuccess=r(()=>!!this._loginState.successMsg()||!!this._googleLoginState.successMsg());_loginStateError=l.CombineErrors(this._loginState,this._googleLoginState);twoFactorRequired=r(()=>{let t=this._loginStateError();return!!(t&&t instanceof g&&t.twoFactorRequired)});twoFactorData=r(()=>{let t=this._loginStateError();if(!t||!(t instanceof g))return;let e=t.payload;return new a(e?.twoFactorToken,e?.twoFactorProvider)});login=t=>this._loginState.trigger(t);loginGoogle=t=>this._googleLoginState.trigger(t);forgotPassword=t=>this._forgotPwdState.trigger(t);static \u0275fac=function(e){return new(e||o)};static \u0275prov=S({token:o,factory:o.\u0275fac})}return o})();export{$ as a,b};
