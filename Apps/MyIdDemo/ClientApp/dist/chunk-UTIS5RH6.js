import{a as y}from"./chunk-V2TZMPJT.js";import{a as W}from"./chunk-E6PBY26I.js";import{a as A,b as Y}from"./chunk-XVK472TK.js";import{a as R,b as H}from"./chunk-J7V4XGIJ.js";import{a as N}from"./chunk-YIT3BSWB.js";import{a as P}from"./chunk-UQNNMBE6.js";import"./chunk-5M6LSHM4.js";import"./chunk-QHIVMJYN.js";import{a as q}from"./chunk-WKO4SONN.js";import{a as L,b as c,ca as z,d as D,da as G,e as x,f as I,h as V,i as j,m as B,n as k}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as T}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Aa as b,Da as _,Eb as i,Gb as F,Hc as O,Jb as f,Ob as n,Pb as s,Qb as l,Ub as m,Y as S,ca as g,db as r,ec as d,mc as E,sb as C,xb as w,za as M}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var v=(()=>{class t{_ioService=g(T);_changePwdState=z.CreateWithInput(o=>this._ioService.changePassword(o)).setSuccessMsgFn((o,a)=>`${a.message||"Password changed successfully!"}`);_states=G.Combine(this._changePwdState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;changeSuccess=O(()=>!!this._changePwdState.successMsg()?.length);changePassword=o=>this._changePwdState.trigger(o);static \u0275fac=function(a){return new(a||t)};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})();function K(t,h){t&1&&(n(0,"label",2),d(1,"Email"),s()),t&2&&i("for","email")}function Q(t,h){t&1&&(n(0,"label",2),d(1,"Current Password"),s()),t&2&&i("for","password")}function U(t,h){t&1&&(n(0,"label",2),d(1,"New Password"),s()),t&2&&i("for","newPassword")}function X(t,h){t&1&&(n(0,"label",2),d(1,"Confirm New Password"),s()),t&2&&i("for","confirmPassword")}function Z(t,h){t&1&&(n(0,"span",10),d(1,"Passwords do not match"),s())}var J=(()=>{class t{fb=g(B);changePassword=M();showLabels=b(!0);color=b("primary");set passwordValidators(o){setTimeout(()=>{o?.length?this._form.controls.password.setValidators([c.required,...o]):this._form.controls.password.setValidators([c.required])},500)}showCurrentPassword=_(!1);showNewPassword=_(!1);showConfirmPassword=_(!1);_form=this.fb.nonNullable.group({email:["",[c.required,c.email]],password:["",[c.required]],newPassword:["",[c.required,...y.validationArray(6)]],confirmPassword:["",[c.required]]},{validators:y.matchValidator("newPassword","confirmPassword")});submit(){if(!this._form.valid)return;let o={email:this._form.controls.email.value,password:this._form.controls.password.value,newPassword:this._form.controls.newPassword.value,confirmPassword:this._form.controls.confirmPassword.value};this.changePassword.emit(o)}onCurrentPasswordToggle=o=>this.showCurrentPassword.set(!o);onNewPasswordToggle=o=>this.showNewPassword.set(!o);onConfirmPasswordToggle=o=>this.showConfirmPassword.set(!o);static \u0275fac=function(a){return new(a||t)};static \u0275cmp=C({type:t,selectors:[["sb-change-pwd-form"]],inputs:{showLabels:[1,"showLabels"],color:[1,"color"],passwordValidators:"passwordValidators"},outputs:{changePassword:"changePassword"},decls:26,vars:24,consts:[[1,"change-pwd-form",3,"ngSubmit","formGroup","sbFormControlFirstError"],[1,"form-group"],[3,"for"],["sbInputStyle","","type","email","formControlName","email","placeholder","Enter your email",3,"id","color"],[3,"control"],["sbInputWithBtn","",1,"password-input-container",3,"color"],["formControlName","password","placeholder","Enter your current password",3,"id","type"],["toggledLabel","Hide password","untoggledLabel","Show password",3,"toggled"],["formControlName","newPassword","placeholder","Enter your new password",3,"id","type"],["formControlName","confirmPassword","placeholder","Confirm your new password",3,"id","type"],[1,"error"],["type","submit",3,"disabled","color"]],template:function(a,e){a&1&&(n(0,"form",0),m("ngSubmit",function(){return e.submit()}),n(1,"div",1),w(2,K,2,1,"label",2),l(3,"input",3)(4,"sb-first-error",4),s(),n(5,"div",1),w(6,Q,2,1,"label",2),n(7,"div",5),l(8,"input",6),n(9,"sb-toggle-icon-button",7),m("toggled",function(p){return e.onCurrentPasswordToggle(p)}),s()(),l(10,"sb-first-error",4),s(),n(11,"div",1),w(12,U,2,1,"label",2),n(13,"div",5),l(14,"input",8),n(15,"sb-toggle-icon-button",7),m("toggled",function(p){return e.onNewPasswordToggle(p)}),s()(),l(16,"sb-first-error",4),s(),n(17,"div",1),w(18,X,2,1,"label",2),n(19,"div",5),l(20,"input",9),n(21,"sb-toggle-icon-button",7),m("toggled",function(p){return e.onConfirmPasswordToggle(p)}),s()(),l(22,"sb-first-error",4),w(23,Z,2,0,"span",10),s(),n(24,"sb-button",11),d(25," Change Password "),s()()),a&2&&(i("formGroup",e._form)("sbFormControlFirstError",e._form),r(2),f(e.showLabels()?2:-1),r(),i("id","email")("color",e.color()),r(),i("control",e._form.controls.email),r(2),f(e.showLabels()?6:-1),r(),i("color",e.color()),r(),i("id","password")("type",e.showCurrentPassword()?"text":"password"),r(2),i("control",e._form.controls.password),r(2),f(e.showLabels()?12:-1),r(),i("color",e.color()),r(),i("id","newPassword")("type",e.showNewPassword()?"text":"password"),r(2),i("control",e._form.controls.newPassword),r(2),f(e.showLabels()?18:-1),r(),i("color",e.color()),r(),i("id","confirmPassword")("type",e.showConfirmPassword()?"text":"password"),r(2),i("control",e._form.controls.confirmPassword),r(),f(e._form.hasError("passwordMismatch")&&e._form.controls.confirmPassword.touched?23:-1),r(),i("disabled",e._form.invalid)("color",e.color()))},dependencies:[k,I,L,D,x,V,j,H,R,P,W,Y,A],styles:["[_nghost-%COMP%]{display:block;max-width:450px;width:100%;border-radius:1rem}.change-pwd-form[_ngcontent-%COMP%]{width:100%;color:var(--mat-sys-on-surface-container);display:flex;flex-direction:column;gap:1.5rem}.change-pwd-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;margin-bottom:1rem;line-height:1.4}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}sb-button[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-size:.95rem;margin-top:-.25rem}.password-input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between;border:1px solid var(--mat-sys-outline);transition:border-color .3s ease-in-out;border-radius:.5rem;padding-right:1rem}.password-input-container[_ngcontent-%COMP%]:focus-within{border-color:var(--mat-sys-primary)}.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{all:unset;padding:.75rem 1rem;font-size:1rem;border-radius:inherit;background-color:transparent;outline:none;flex:1}"],changeDetection:0})}return t})();var Me=(()=>{class t{_state=g(v);_router=g(N);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_changeSuccess=this._state.changeSuccess;changePassword=o=>this._state.changePassword(o);goToLogin=()=>this._router.navigateToLogin();static \u0275fac=function(a){return new(a||t)};static \u0275cmp=C({type:t,selectors:[["sb-change-pwd"]],features:[E([v])],decls:9,vars:5,consts:[[1,"container"],[1,"form"],[1,"header"],[3,"changePassword"],["color","secondary",1,"go-to-login-btn",3,"click"],[3,"errorMsg","successMsg","isLoading"]],template:function(a,e){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),d(4,"Change Your Password"),s()(),n(5,"sb-change-pwd-form",3),m("changePassword",function(p){return e.changePassword(p)}),s()(),n(6,"sb-button",4),m("click",function(){return e.goToLogin()}),d(7," Login "),s()(),l(8,"sb-notifications-modal-mat",5)),a&2&&(r(6),F("show",e._changeSuccess()),r(2),i("errorMsg",e._errorMsg())("successMsg",e._successMsg())("isLoading",e._loading()))},dependencies:[q,J,P],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;max-width:450px;display:flex;align-items:center;flex-direction:column;justify-content:center}.form[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;flex-direction:column}.header[_ngcontent-%COMP%]{margin-bottom:3rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;line-height:1.4}sb-change-pwd-form[_ngcontent-%COMP%]{width:100%}sb-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translateY(40px) scale(.98);margin:2rem 0;width:100%}sb-button.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}"],changeDetection:0})}return t})();export{Me as ChangePwdComponent};
