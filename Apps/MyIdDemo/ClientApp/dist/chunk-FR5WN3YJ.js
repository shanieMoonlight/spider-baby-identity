import{a as D}from"./chunk-V2TZMPJT.js";import{a as me}from"./chunk-D3W4P42R.js";import"./chunk-E6PBY26I.js";import{a as ie,b as ae}from"./chunk-XVK472TK.js";import{a as de,b as le}from"./chunk-J7V4XGIJ.js";import{a as U}from"./chunk-YIT3BSWB.js";import{a as P}from"./chunk-UQNNMBE6.js";import{a as R}from"./chunk-5M6LSHM4.js";import{a as K}from"./chunk-QHIVMJYN.js";import"./chunk-VLIVY6BI.js";import"./chunk-J2DBJL2B.js";import{a as ne}from"./chunk-WKO4SONN.js";import{a as J,b as y,ca as E,d as Q,da as se,e as X,f as Z,h as ee,i as te,m as oe,n as re}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as H}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import{c as T}from"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{A as F,Aa as f,Da as b,Eb as i,Gb as j,Hc as C,Jb as _,Ob as n,Pb as a,Qb as u,Sb as $,Ub as l,Vb as h,Wb as W,Xb as q,Y as B,ca as p,db as s,ec as m,f as k,ic as Y,jc as z,kc as A,la as V,ma as N,mc as G,p as S,q as L,sb as w,xb as g,za as M}from"./chunk-CCUFKVTZ.js";import{a as O}from"./chunk-6MDQTQU3.js";function ue(o,v){if(o&1&&(n(0,"label",2),m(1,"New Password"),a()),o&2){let e=h();i("for","newPassword"+e._idSuffix)}}function fe(o,v){if(o&1&&(n(0,"label",2),m(1,"Confirm New Password"),a()),o&2){let e=h();i("for","confirmPassword"+e._idSuffix)}}function we(o,v){o&1&&(n(0,"span",8),m(1,"Passwords do not match"),a())}var ce=(()=>{class o{fb=p(oe);resetPassword=M();showLabels=f(!0);disabled=f(!0);color=f("primary");set passwordValidators(e){setTimeout(()=>{e?.length?this._form.controls.newPassword.setValidators([y.required,...e]):this._form.controls.newPassword.setValidators([y.required])},500)}showPassword=b(!1);showConfirmPassword=b(!1);_form=this.fb.nonNullable.group({newPassword:["",[y.required,...D.validationArray(6)]],confirmPassword:["",[y.required]]},{validators:D.matchValidator("newPassword","confirmPassword")});static _count=0;_idSuffix=`-${o._count++}`;submit(){if(!this._form.valid)return;let e={newPassword:this._form.controls.newPassword.value,confirmPassword:this._form.controls.confirmPassword.value};this.resetPassword.emit(e)}onPasswordToggle=e=>this.showPassword.set(!e);onConfirmPasswordToggle=e=>this.showConfirmPassword.set(!e);static \u0275fac=function(r){return new(r||o)};static \u0275cmp=w({type:o,selectors:[["sb-reset-pwd-form"]],inputs:{showLabels:[1,"showLabels"],disabled:[1,"disabled"],color:[1,"color"],passwordValidators:"passwordValidators"},outputs:{resetPassword:"resetPassword"},decls:16,vars:17,consts:[[1,"reset-pwd-form",3,"ngSubmit","formGroup","sbFormControlFirstError"],[1,"form-group"],[3,"for"],["sbInputWithBtn","",1,"password-input-container",3,"color"],["formControlName","newPassword","placeholder","Enter your new password",3,"id","type"],["toggledLabel","Hide password","untoggledLabel","Show password",3,"toggled","color"],[3,"control"],["formControlName","confirmPassword","placeholder","Confirm your new password",3,"id","type"],[1,"error"],["type","submit",3,"disabled","color"]],template:function(r,t){r&1&&(n(0,"form",0),l("ngSubmit",function(){return t.submit()}),n(1,"div",1),g(2,ue,2,1,"label",2),n(3,"div",3),u(4,"input",4),n(5,"sb-toggle-icon-button",5),l("toggled",function(d){return t.onPasswordToggle(d)}),a()(),u(6,"sb-first-error",6),a(),n(7,"div",1),g(8,fe,2,1,"label",2),n(9,"div",3),u(10,"input",7),n(11,"sb-toggle-icon-button",5),l("toggled",function(d){return t.onConfirmPasswordToggle(d)}),a()(),u(12,"sb-first-error",6),g(13,we,2,0,"span",8),a(),n(14,"sb-button",9),m(15," Reset Password "),a()()),r&2&&(i("formGroup",t._form)("sbFormControlFirstError",t._form),s(2),_(t.showLabels()?2:-1),s(),i("color",t.color()),s(),i("id","newPassword"+t._idSuffix)("type",t.showPassword()?"text":"password"),s(),i("color",t.color()),s(),i("control",t._form.controls.newPassword),s(2),_(t.showLabels()?8:-1),s(),i("color",t.color()),s(),i("id","confirmPassword"+t._idSuffix)("type",t.showConfirmPassword()?"text":"password"),s(),i("color",t.color()),s(),i("control",t._form.controls.confirmPassword),s(),_(t._form.hasError("passwordMismatch")&&t._form.controls.confirmPassword.touched?13:-1),s(),i("disabled",t._form.invalid||t.disabled())("color",t.color()))},dependencies:[re,Z,J,Q,X,ee,te,le,de,P,ae,ie],styles:["[_nghost-%COMP%]{display:block;max-width:450px;width:100%;border-radius:1rem}.reset-pwd-form[_ngcontent-%COMP%]{width:100%;color:var(--mat-sys-on-surface-container);display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}sb-button[_ngcontent-%COMP%]{width:100%;max-width:450px}.error[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-size:.95rem;margin-top:-.25rem}.password-input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:space-between;border:1px solid var(--mat-sys-outline);transition:border-color .3s ease-in-out;border-radius:.5rem;padding-right:1rem}.password-input-container[_ngcontent-%COMP%]:focus-within{border-color:var(--mat-sys-primary)}.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{all:unset;padding:.75rem 1rem;font-size:1rem;border-radius:inherit;background-color:transparent;outline:none;flex:1}"],changeDetection:0})}return o})();var ge=["*"],pe=(()=>{class o{color=f("primary");forgotPwd=M();_showForgotPwd=b(!1);onForgotPassword=e=>this.forgotPwd.emit(e);static \u0275fac=function(r){return new(r||o)};static \u0275cmp=w({type:o,selectors:[["sb-forgot-pwd-modal-button"]],inputs:{color:[1,"color"]},outputs:{forgotPwd:"forgotPwd"},ngContentSelectors:ge,decls:3,vars:2,consts:[[3,"click","color"],[3,"forgotPwd","openModalChange","openModal"]],template:function(r,t){r&1&&(W(),n(0,"sb-button",0),l("click",function(){return t._showForgotPwd.set(!0)}),q(1),a(),n(2,"sb-forgot-pwd-modal",1),l("forgotPwd",function(d){return t.onForgotPassword(d)}),A("openModalChange",function(d){return z(t._showForgotPwd,d)||(t._showForgotPwd=d),d}),a()),r&2&&(i("color",t.color()),s(2),Y("openModal",t._showForgotPwd))},dependencies:[me,P],encapsulation:2,changeDetection:0})}return o})();var x=(()=>{class o{_actRoute=p(K);_ioService=p(H);_userId$=this._actRoute.queryParamMap.pipe(S(e=>e.get(R.Params.USER_ID_KEY)),F(e=>!!e));_userId=T(this._userId$);_token$=this._actRoute.queryParamMap.pipe(S(e=>e.get(R.Params.RESET_PWD_TOKEN_KEY)),F(e=>!!e));_token=T(this._token$);readyToReset=C(()=>!!this._userId()&&!!this._token());invalidDataErrorMsg=C(()=>this.readyToReset()?void 0:"Invalid userId or token.");_resetInputData$=new k;_resetDto$=L([this._userId$,this._token$,this._resetInputData$]).pipe(S(([e,r,t])=>O({userId:e,resetToken:r},t)));_resetPwdState=E.CreateWithObservableInput(this._resetDto$,e=>this._ioService.resetPassword(e)).setSuccessMsgFn((e,r)=>r.message||"Your password is successfully reset");_forgotPwdState=E.CreateWithInput(e=>this._ioService.forgotPassword(e)).setSuccessMsgFn((e,r)=>`${r.message}`);_states=se.Combine(this._forgotPwdState,this._resetPwdState);successMsg=this._states.successMsg;errorMsg=C(()=>this.invalidDataErrorMsg()||this._states.errorMsg());loading=this._states.loading;resetSuccess=C(()=>!!this._resetPwdState.successMsg()?.length);resetPwd=e=>this._resetInputData$.next(e);forgotPassword=e=>this._forgotPwdState.trigger(e);static \u0275fac=function(r){return new(r||o)};static \u0275prov=B({token:o,factory:o.\u0275fac})}return o})();function _e(o,v){if(o&1){let e=$();n(0,"sb-forgot-pwd-modal-button",6),l("forgotPwd",function(t){V(e);let c=h();return N(c.onForgotPwdClick(t))}),m(1," Resend Verification Email "),a()}}var ot=(()=>{class o{_state=p(x);_router=p(U);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_readyToReset=this._state.readyToReset;_resetSuccess=this._state.resetSuccess;resetPwd=e=>this._state.resetPwd(e);onForgotPwdClick=e=>this._state.forgotPassword(e);goToLogin=()=>this._router.navigateToLogin();static \u0275fac=function(r){return new(r||o)};static \u0275cmp=w({type:o,selectors:[["sb-reset-pwd"]],features:[G([x])],decls:10,vars:8,consts:[[1,"container"],[1,"description"],[3,"resetPassword","showLabels","disabled"],["color","error"],["color","secondary",1,"go-to-login-btn",3,"click"],[3,"errorMsg","successMsg","isLoading"],["color","error",3,"forgotPwd"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"h2"),m(2,"Reset Your Password"),a(),n(3,"p",1),m(4,"Enter your email address and create a new secure password for your account."),a(),n(5,"sb-reset-pwd-form",2),l("resetPassword",function(d){return t.resetPwd(d)}),a(),g(6,_e,2,0,"sb-forgot-pwd-modal-button",3),n(7,"sb-button",4),l("click",function(){return t.goToLogin()}),m(8," Login "),a()(),u(9,"sb-notifications-modal-mat",5)),r&2&&(s(5),i("showLabels",!1)("disabled",!t._readyToReset()),s(),_(t._errorMsg()?6:-1),s(),j("show",t._resetSuccess()),s(2),i("errorMsg",t._errorMsg())("successMsg",t._successMsg())("isLoading",t._loading()))},dependencies:[ce,ne,pe,P],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;max-width:450px;display:flex;align-items:center;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;margin-bottom:3rem;line-height:1.4}sb-forgot-pwd-modal-button[_ngcontent-%COMP%]{width:100%;margin:2rem 0}sb-reset-pwd-form[_ngcontent-%COMP%]{width:100%}sb-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translateY(40px) scale(.98);margin:2rem 0;width:100%}sb-button.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}"],changeDetection:0})}return o})();export{ot as ResetPwdComponent};
