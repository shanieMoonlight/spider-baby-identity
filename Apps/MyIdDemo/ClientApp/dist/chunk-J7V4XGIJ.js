import{m as k,s as S}from"./chunk-Y5WPSY3K.js";import{A as E,Aa as c,Ba as y,Db as x,Eb as $,Ia as C,Jb as m,Ob as T,Pb as O,R as b,Rb as I,Vb as l,ca as a,db as _,ec as D,gc as L,hb as F,oc as P,p as v,sb as M,ub as w,xb as u}from"./chunk-CCUFKVTZ.js";import{a as h,b as g}from"./chunk-6MDQTQU3.js";var j=e=>({errorMessage:e});function q(e,n){if(e&1&&I(0,0),e&2){let t=l();$("ngTemplateOutlet",n)("ngTemplateOutletContext",P(2,j,t))}}function K(e,n){if(e&1&&(T(0,"span",1),D(1),O()),e&2){let t=l();x("aria-live","polite")("role","alert"),_(),L(" ",t," ")}}function A(e,n){if(e&1&&u(0,q,1,4,"ng-container",0)(1,K,2,3,"span",1),e&2){let t,r=l();m((t=r.customErrorTemplate())?0:1,t)}}var V=(()=>{class e{control=c.required();customErrorTemplate=c(void 0);static \u0275fac=function(r){return new(r||e)};static \u0275cmp=M({type:e,selectors:[["sb-first-error"]],inputs:{control:[1,"control"],customErrorTemplate:[1,"customErrorTemplate"]},decls:1,vars:1,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"error"]],template:function(r,o){if(r&1&&u(0,A,2,1),r&2){let s;m((s=(s=o.control().errors)==null?null:s.firstError)?0:-1,s)}},dependencies:[k],styles:["[_nghost-%COMP%]{display:block;--error-color: var(--mat-sys-error, #d9534f)}.error[_ngcontent-%COMP%]{color:var(--error-color, #d9534f);font-size:.875rem;margin-top:.25rem;display:block;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-2px)}to{opacity:1;transform:translateY(0)}}"]})}return e})();var B=new Map([["required",e=>`${e} is required.`],["email",()=>"Please enter a valid email address."],["minlength",(e,n)=>n?`${e} must be at least ${n?.requiredLength} characters.`:"Value is too short"],["maxlength",(e,n)=>n?`${e} must be no more than ${n?.requiredLength} characters.`:"Value is too long"],["pattern",e=>`${e} format is invalid.`],["min",(e,n)=>n?`${e} must be at least ${n?.min}.`:"Value is too small"],["max",(e,n)=>n?`${e} must be no more than ${n?.max}.`:"Value is too large"],["passwordMismatch",()=>"Passwords do not match."],["mustMatch",()=>"Fields do not match."],["whitespace",e=>`${e} cannot contain only whitespace.`],["forbiddenValue",(e,n)=>n?`${e} cannot be "${n?.value}".`:"This value is not allowed"],["asyncValidation",e=>`${e} validation is pending...`],["invalidDate",()=>"Please enter a valid date."],["futureDate",()=>"Date must be in the future."],["pastDate",()=>"Date must be in the past."],["strongPassword",()=>"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character."],["phoneNumber",(e,n)=>n.message?n.message:"Please enter a valid phone number."],["url",()=>"Please enter a valid URL."],["unique",e=>`This ${e.toLowerCase()} is already taken.`],["fileSize",(e,n)=>n?`File size must be less than ${n?.maxSize}.`:"File is too large"],["fileType",(e,n)=>n?`Only ${n?.allowedTypes?.join(", ")} files are allowed.`:"Invalid file type"]]),d=(()=>{class e{static setFirstErrors(t,r){let o=t.controls;for(let s in o){let i=o[s];i.invalid&&this.setFirstErrorMessage(s,i,r)}}static setFirstErrorMessage(t,r,o){let s=r.errors,i=e.getFirstErrorMessage(t,r,o);i&&r.setErrors(g(h({},s),{firstError:i}),{emitEvent:!1})}static getFirstErrorMessage(t,r,o){let s=this.firstErrorKey(r);if(!s)return null;let i=r.errors?.[s],f=this.toTitleCase(t)??"This field";if(typeof i=="string")return i;let p=o?.get(s)??B.get(s);return p?p(f,i):`Invalid value for ${f}.`}static firstErrorKey=t=>Object.keys(t.errors||{}).length>0?Object.keys(t.errors||{})[0]:null;static toTitleCase(t){let r=t.replace(/([A-Z])/g," $1");return r.charAt(0).toUpperCase()+r.slice(1)}}return e})();var U=(()=>{class e{static findInvalidControlNames(t){let r=new Set,o=t.controls;for(let s in o)o[s].invalid&&r.add(s);return r}static findInvalidControlInfo(t){let r=new Set,o=t.controls;for(let s in o)o[s].invalid&&r.add(`${s}: ${this.firstErrorKey(o[s])||"Invalid"}`);return r}static findInvalidControls(t){let r=[],o=t.controls;for(let s in o)o[s].invalid&&r.push(o[s]);return r}static findInvalidControlsData(t){let r=[],o=t.controls;for(let s in o){let i=o[s];i.invalid&&r.push({name:s,control:i})}return r}static replaceNullWithUndefined(t){for(let[r,o]of Object.entries(t))o===null&&(t[r]=void 0);return t}static getFirstFormError(t){if(t.valid)return null;if(t.errors){let r=Object.keys(t.errors)[0];return{[r]:t.errors[r]}}for(let r of Object.keys(t.controls)){let o=t.get(r);if(o?.errors){let s=Object.keys(o.errors)[0];return{[s]:o.errors[s]}}}return null}static firstErrorKey=t=>Object.keys(t.errors||{}).length>0?Object.keys(t.errors||{})[0]:null}return e})();var nt=(()=>{class e{_platformId=a(C);_renderer=a(F);_host=a(y);set sbFormControlFirstError(t){this._form=t,this.observeValueChanges(this._form)}customErrorMessages;showUntouched=!1;_form;_vcSub;blurListeners=new Map;ngOnDestroy(){this._vcSub?.unsubscribe(),this.removeAllBlurListeners()}addBlurListener(t,r){let o=this._host.nativeElement.querySelector(`[formControlName="${t}"]`);if(!o)return;let s=this._renderer.listen(o,"focusout",()=>{r.errors?.firstError||d.setFirstErrorMessage(t,r,this.customErrorMessages),s(),this.blurListeners.delete(t)});this.blurListeners.set(t,s)}removeAllBlurListeners(){for(let t of this.blurListeners.values())t();this.blurListeners.clear()}observeValueChanges(t){S(this._platformId)&&(this._vcSub?.unsubscribe(),this._vcSub=t.statusChanges.pipe(b("PENDING"),E(()=>t.status==="INVALID"),v(()=>U.findInvalidControlsData(t))).subscribe(r=>{for(let o of r){let s=o.control,i=o.name;s.errors?.firstError||(this.showUntouched||s.touched?d.setFirstErrorMessage(i,s,this.customErrorMessages):s.touched||this.blurListeners.has(i)||this.addBlurListener(i,s))}}))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=w({type:e,selectors:[["","sbFormControlFirstError",""]],inputs:{sbFormControlFirstError:"sbFormControlFirstError",customErrorMessages:"customErrorMessages",showUntouched:"showUntouched"}})}return e})();export{V as a,nt as b};
