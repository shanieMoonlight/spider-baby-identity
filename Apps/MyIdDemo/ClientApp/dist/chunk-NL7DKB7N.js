import{a as h}from"./chunk-LAXJKARQ.js";import{a as m}from"./chunk-5M6LSHM4.js";import{a as S}from"./chunk-QHIVMJYN.js";import{ca as r,da as g}from"./chunk-VJXHLJA5.js";import{a as d}from"./chunk-CWY6TGXW.js";import{b as f}from"./chunk-CU2LV2W6.js";import{c as a}from"./chunk-ZUYYKIIZ.js";import{A as l,Hc as n,Y as u,ca as s,p as i}from"./chunk-CCUFKVTZ.js";var c=class{provider;constructor(_){this.provider=_}};var $=(()=>{class t{showSocialLinks;constructor(o=!1){this.showSocialLinks=o}static create=o=>new t(o?.showSocialLinks??!1)}return t})(),b=(()=>{class t{_ioService=s(d);_loginService=s(h);_actRoute=s(S);_showSocialLinks$=this._actRoute.data.pipe(i(o=>o),i(o=>o.showSocialLinks??!1));showSocialLinks=a(this._showSocialLinks$,{initialValue:!1});_redirectUrl$=this._actRoute.queryParamMap.pipe(i(o=>o.get(m.Params.REDIRECT_URL_KEY)),l(o=>!!o));redirectUrl=a(this._redirectUrl$,{initialValue:null});_cookieLoginState=r.CreateWithInput(o=>this._loginService.loginCookie(o)).setSuccessMsgFn(o=>`User,  ${o.email??o.username??o.userId}, is logged in successfully!`).setOnSuccessFn((o,e)=>{console.log("Login successful:",e)});_googleLoginState=r.CreateWithInput(o=>this._loginService.loginGoogleCookie(o)).setSuccessMsgFn(o=>"Logged in successfully!").setOnSuccessFn((o,e)=>{console.log("Login successful:",o,e)});_forgotPwdState=r.CreateWithInput(o=>this._ioService.forgotPassword(o)).setSuccessMsgFn((o,e)=>`${e.message}`);_states=g.Combine(this._cookieLoginState,this._forgotPwdState,this._googleLoginState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;loginSuccess=n(()=>!!this._cookieLoginState.successMsg()||!!this._googleLoginState.successMsg());_loginStateError=g.CombineErrors(this._cookieLoginState,this._googleLoginState);twoFactorData=n(()=>{let o=this._loginStateError();if(console.log("Checking for two-factor token...",o),!o||!(o instanceof f))return;let e=o.payload;return o.twoFactorRequired||e?.twoFactorRequired?new c(e?.twoFactorProvider):void 0});loginCookie=o=>this._cookieLoginState.trigger(o);loginGoogleCookie=o=>this._googleLoginState.trigger(o);forgotPassword=o=>this._forgotPwdState.trigger(o);static \u0275fac=function(e){return new(e||t)};static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})();export{$ as a,b};
