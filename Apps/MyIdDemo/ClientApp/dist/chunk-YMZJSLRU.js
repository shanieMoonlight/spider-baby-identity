import{a as D}from"./chunk-HZ2EKXOK.js";import{a as x}from"./chunk-YIT3BSWB.js";import{a as O}from"./chunk-UQNNMBE6.js";import{a as _}from"./chunk-5M6LSHM4.js";import{a as w}from"./chunk-QHIVMJYN.js";import{a as k}from"./chunk-WKO4SONN.js";import{ca as C,da as $}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as I}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import{c as g}from"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{A as b,Eb as f,Gb as c,Hc as r,Ob as m,Pb as u,Qb as l,Ub as h,Y as P,ca as i,db as a,ec as p,f as S,mc as y,p as s,q as d,sb as v}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";var M=(()=>{class n{_ioService=i(I);_actRoute=i(w);_userId$=this._actRoute.queryParamMap.pipe(s(e=>e.get(_.Params.USER_ID_KEY)));_userId=g(this._userId$);_token$=this._actRoute.queryParamMap.pipe(s(e=>e.get(_.Params.CONFIRMATION_TOKEN_KEY)),b(e=>!!e));_token=g(this._token$);readyToConfirm=r(()=>!!this._userId()&&!!this._token());invalidDataErrorMsg=r(()=>this.readyToConfirm()?void 0:"Invalid userId or token.");_confirmDto$=d([this._userId$,this._token$]).pipe(s(([e,t])=>({userId:e,confirmationToken:t})));_confirmPhoneState=C.CreateWithObservableInput(this._confirmDto$,e=>this._ioService.confirmPhone(e)).setSuccessMsgFn((e,t)=>`${t.message||"Phone confirmed!."}`);_resendClick$=new S;_resendDto$=d([this._userId$,this._resendClick$]).pipe(s(([e])=>({userId:e})));_resendState=C.CreateWithObservableInput(this._resendDto$,e=>this._ioService.resendPhoneConfirmation(e)).setSuccessMsgFn((e,t)=>`${t.message||"Resend confirmation Phone request is successful."}`);_states=$.Combine(this._resendState,this._confirmPhoneState);errorMsg=r(()=>this.invalidDataErrorMsg()||this._states.errorMsg());loading=this._states.loading;resendSuccess=r(()=>!!this._resendState.successMsg()?.length);confirmationSuccess=r(()=>!!this._confirmPhoneState.successMsg()?.length);resendSuccessMsg=this._resendState.successMsg;phoneConfirmedSuccessMsg=this._confirmPhoneState.successMsg;resendConfirmation=()=>this._resendClick$.next();static \u0275fac=function(t){return new(t||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();var X=(()=>{class n{_state=i(M);_router=i(x);_errorMsg=this._state.errorMsg;_loading=this._state.loading;_resendSuccess=this._state.resendSuccess;_confirmationSuccess=this._state.confirmationSuccess;_phoneConfirmedSuccessMsg=this._state.phoneConfirmedSuccessMsg;_resendSuccessMsg=this._state.resendSuccessMsg;resendConfirmation=()=>this._state.resendConfirmation();goToLogin=()=>this._router.navigateToLogin();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=v({type:n,selectors:[["sb-confirm-phone"]],features:[y([M])],decls:7,vars:11,consts:[[1,"container"],[3,"title","message"],["color","primary",1,"go-to-login-btn",3,"click"],["color","error",1,"resend-confirmation-btn",3,"click"],[3,"errorMsg","successMsg","isLoading"]],template:function(t,o){t&1&&(m(0,"div",0),l(1,"sb-confirmed-card",1),m(2,"sb-button",2),h("click",function(){return o.goToLogin()}),p(3," Login "),u(),m(4,"sb-button",3),h("click",function(){return o.resendConfirmation()}),p(5," Resend Phone Confirmation "),u()(),l(6,"sb-notifications-modal-mat",4)),t&2&&(a(),c("show",o._confirmationSuccess()),f("title","Phone Number Confirmed!")("message",o._phoneConfirmedSuccessMsg()),a(),c("show",o._resendSuccess()),a(2),c("show",o._errorMsg()),a(2),f("errorMsg",o._errorMsg())("successMsg",o._resendSuccessMsg())("isLoading",o._loading()))},dependencies:[k,D,O],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;max-width:1200px;display:flex;align-items:center;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;margin-bottom:3rem;line-height:1.4}.form[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;flex-direction:column}sb-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translateY(40px) scale(.98);margin:2rem 0;width:300px;max-width:100%}sb-confirmed-card[_ngcontent-%COMP%]{max-height:0px;overflow:hidden;border-radius:1.25rem;box-shadow:0 4px 24px #3c48581f;max-width:400px;margin:0 auto;transform:translateY(40px) scale(.98);opacity:0;pointer-events:none;transition:opacity .5s cubic-bezier(.4,0,.2,1),transform .5s cubic-bezier(.4,0,.2,1)}sb-confirmed-card.show[_ngcontent-%COMP%], sb-button.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);margin:2rem auto 1.5rem;pointer-events:auto;max-height:unset}sb-confirmed-card.show[_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0})}return n})();export{X as ConfirmPhoneComponent};
