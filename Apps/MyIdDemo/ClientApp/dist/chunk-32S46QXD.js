import{a as E}from"./chunk-TJLYVA2U.js";import{a as R}from"./chunk-3CINSE24.js";import{a as O}from"./chunk-A4LVP73L.js";import{a as G,b as B}from"./chunk-J7V4XGIJ.js";import{a as T}from"./chunk-YIT3BSWB.js";import{a as v}from"./chunk-UQNNMBE6.js";import"./chunk-5M6LSHM4.js";import"./chunk-QHIVMJYN.js";import{a as k}from"./chunk-WKO4SONN.js";import{b as x,ca as b,d as I,da as z,e as U,f as D,h as L,i as A,m as N,n as j}from"./chunk-VJXHLJA5.js";import"./chunk-YCVKD4PR.js";import{a as y}from"./chunk-CWY6TGXW.js";import"./chunk-CU2LV2W6.js";import"./chunk-ZUYYKIIZ.js";import"./chunk-4XZ6Q3KQ.js";import"./chunk-XWDBGFUP.js";import"./chunk-VVB4K6R7.js";import"./chunk-Y5WPSY3K.js";import{Aa as l,Eb as d,Gb as w,Hc as P,Jb as h,Ob as o,Pb as i,Qb as f,Ub as p,Y as S,ca as c,db as s,ec as a,mc as F,sb as u,xb as _,za as M}from"./chunk-CCUFKVTZ.js";import"./chunk-6MDQTQU3.js";function $(e,g){e&1&&(o(0,"label",2),a(1,"Authentication Method"),i()),e&2&&d("for","provider")}function J(e,g){e&1&&(o(0,"div",6)(1,"h4"),a(2,"Authenticator App"),i(),o(3,"p"),a(4," Use apps like Google Authenticator, Authy, or Microsoft Authenticator to generate time-based codes. "),i()())}function W(e,g){e&1&&(o(0,"div",6)(1,"h4"),a(2,"SMS"),i(),o(3,"p"),a(4," Receive verification codes via text message to your registered phone number. "),i()())}function H(e,g){e&1&&(o(0,"div",6)(1,"h4"),a(2,"Email"),i(),o(3,"p"),a(4," Receive verification codes via email to your registered email address. "),i()())}var Y=(()=>{class e{_fb=c(N);showLabels=l(!0);updateProvider=M();color=l("primary");set currentProvider(r){this._form.controls.provider.setValue(r)}twoFactorProviderOptions=l.required();_form=this._fb.nonNullable.group({provider:["",[x.required]]});submit(){if(!this._form.valid)return;let r={provider:this._form.controls.provider.value};this.updateProvider.emit(r)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["sb-update-two-factor-provider-form"]],inputs:{showLabels:[1,"showLabels"],color:[1,"color"],currentProvider:"currentProvider",twoFactorProviderOptions:[1,"twoFactorProviderOptions"]},outputs:{updateProvider:"updateProvider"},decls:11,vars:10,consts:[[1,"update-two-factor-provider-form",3,"ngSubmit","formGroup","sbFormControlFirstError"],[1,"form-group"],[3,"for"],["placeholder","Select authentication method","formControlName","provider",3,"id","options","color"],[3,"control"],[1,"provider-info"],[1,"info-card"],["type","submit",3,"disabled","color"]],template:function(n,t){if(n&1&&(o(0,"form",0),p("ngSubmit",function(){return t.submit()}),o(1,"div",1),_(2,$,2,1,"label",2),f(3,"sb-select",3)(4,"sb-first-error",4),i(),o(5,"div",5),_(6,J,5,0,"div",6)(7,W,5,0,"div",6)(8,H,5,0,"div",6),i(),o(9,"sb-button",7),a(10," Update Method "),i()()),n&2){let m;d("formGroup",t._form)("sbFormControlFirstError",t._form),s(2),h(t.showLabels()?2:-1),s(),d("id","provider")("options",t.twoFactorProviderOptions())("color",t.color()),s(),d("control",t._form.controls.provider),s(2),h((m=t._form.controls.provider.value)==="AuthenticatorApp"?6:m==="Sms"?7:m==="Email"?8:-1),s(3),d("disabled",t._form.invalid)("color",t.color())}},dependencies:[j,D,I,U,L,A,B,G,v,R],styles:["[_nghost-%COMP%]{display:block;max-width:450px;width:100%;border-radius:1rem}.description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;margin-bottom:1rem;line-height:1.4}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}sb-button[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-size:.95rem;margin-top:-.25rem}.provider-info[_ngcontent-%COMP%]{margin:.5rem 0}.info-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-variant);border-radius:.5rem;padding:1rem;border-left:4px solid var(--mat-sys-primary)}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1rem;font-weight:600;color:var(--mat-sys-on-surface-variant)}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;line-height:1.4;color:var(--mat-sys-on-surface-variant)}"],changeDetection:0})}return e})();var C=(()=>{class e{_ioService=c(O);_accountIoService=c(y);_updatePwdState=b.CreateWithInput(r=>this._ioService.updateTwoFactorProvider(r)).setSuccessMsgFn((r,n)=>`Provider for ${n.userName} updated to ${n.twoFactorProvider}`);_myInfoState=b.Create(()=>this._accountIoService.myInfo()).trigger();_states=z.Combine(this._updatePwdState,this._myInfoState);successMsg=this._states.successMsg;errorMsg=this._states.errorMsg;loading=this._states.loading;updateSuccess=P(()=>!!this._updatePwdState.successMsg()?.length);_userData=this._myInfoState.data;currentProvider=P(()=>this._userData()?.twoFactorProvider||"Email");changePassword=r=>this._updatePwdState.trigger({provider:r});static \u0275fac=function(n){return new(n||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ce=(()=>{class e{_state=c(C);_router=c(T);_twoFactorOptionsProvider=c(E);_successMsg=this._state.successMsg;_errorMsg=this._state.errorMsg;_loading=this._state.loading;_changeSuccess=this._state.updateSuccess;_twoFactorProviderOptions=this._twoFactorOptionsProvider.getOptions();_currentProvider=this._state.currentProvider;updateProvider=r=>this._state.changePassword(r.provider);goToLogin=()=>this._router.navigateToLogin();static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["sb-update-2-factor"]],features:[F([C])],decls:9,vars:7,consts:[[1,"container"],[1,"form-container"],[1,"header"],[1,"form",3,"updateProvider","currentProvider","twoFactorProviderOptions"],["color","secondary",1,"go-to-login-btn",3,"click"],[3,"errorMsg","successMsg","isLoading"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),a(4,"Change Your 2-Factor Provider"),i()(),o(5,"sb-update-two-factor-provider-form",3),p("updateProvider",function(q){return t.updateProvider(q)}),i()(),o(6,"sb-button",4),p("click",function(){return t.goToLogin()}),a(7," Login "),i()(),f(8,"sb-notifications-modal-mat",5)),n&2&&(s(5),d("currentProvider",t._currentProvider())("twoFactorProviderOptions",t._twoFactorProviderOptions),s(),w("show",t._changeSuccess()),s(2),d("errorMsg",t._errorMsg())("successMsg",t._successMsg())("isLoading",t._loading()))},dependencies:[Y,k,v],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;width:calc(100% - 2rem);min-height:calc(100% - 2rem);align-items:center;justify-content:center;padding:1rem}.container[_ngcontent-%COMP%]{width:98%;max-width:450px;display:flex;align-items:center;flex-direction:column;justify-content:center}.form-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;flex-direction:column}.header[_ngcontent-%COMP%]{margin-bottom:3rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;font-weight:600}.header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);font-size:.95rem;line-height:1.4}.form[_ngcontent-%COMP%]{width:100%}sb-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translateY(40px) scale(.98);margin:2rem 0;width:100%}sb-button.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}"],changeDetection:0})}return e})();export{Ce as Update2FactorComponent};
